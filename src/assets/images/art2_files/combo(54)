YUI.add("hermes-template-basic-banner",function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,a,s){return'\t\t\t<a role="button" class="button dismiss">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(e,n,t,a,s){var l,r,i=null!=n?n:e.nullContext||{},o=e.hooks.helperMissing,c=e.escapeExpression,u=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="basic-banner '+c("function"==typeof(r=null!=(r=u(t,"additionalClasses")||(null!=n?u(n,"additionalClasses"):n))?r:o)?r.call(i,{name:"additionalClasses",hash:{},data:s,loc:{start:{line:1,column:25},end:{line:1,column:46}}}):r)+'">\n\t<div class="banner-content fluid-centered">\n\t\t<div class="message-container">\n\t\t\t'+c((u(t,"renderTrustedMarkup")||n&&u(n,"renderTrustedMarkup")||o).call(i,null!=n?u(n,"message"):n,{name:"renderTrustedMarkup",hash:{},data:s,loc:{start:{line:4,column:3},end:{line:4,column:34}}}))+'\n\t\t</div>\n\t\t<div class="button-container">\n'+(null!=(l=u(t,"if").call(i,null!=n?u(n,"hideDismiss"):n,{name:"if",hash:{},fn:e.noop,inverse:e.program(1,s,0),data:s,loc:{start:{line:7,column:3},end:{line:11,column:10}}}))?l:"")+"\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),a={};e.Array.each([],function(n){var t=e.Template.get("hermes/"+n);t&&(a[n]=t)}),e.Template.register("hermes/basic-banner",function(n,s){return s=s||{},s.partials=s.partials?e.merge(a,s.partials):a,t(n,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("notification-banner-view",function(e,i){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.bannerTypes={notif_center:{title:"featured-banner.NOTIFICATION_CENTER_HEADER_BANNER",cookieName:"dismiss_notification_center_banner_name"},notif_drop:{title:"featured-banner.NOTIFICATION_UPDATED_BANNER",cookieName:"dismiss_notification_updated_banner_name"},notif_settings:{title:"featured-banner.NOTIFICATION_SETTINGS_HEADER_BANNER",cookieName:"dismiss_notification_settings_banner_name"}}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){var e,i=this.bannerTypes[this.params.bannerType].title;return e=this.intlHTMLMessage({intlName:i,learnUrl:"https://help.flickr.com/get-flickr-notifications-by-email-and-in-your-account-ByxRn7jJm",feedbackUrl:"https://www.flickr.com/help/forum/en-us/72157718447996213/"}),this.setContainerWithTemplate("basic-banner",{message:"<p>"+e+"</p>",additionalClasses:"head-banner-style"}),this},activate:function(){return this.registerEventHandler(this.get("container").one(".button.dismiss").on("click",this.dismissBanner.bind(this))),this},dismissBanner:function(){var i=this.bannerTypes[this.params.bannerType].cookieName,n=new Date;n.setTime(n.getTime()+6048e5),this.appContext.setCookie({cookieName:e.config.flickr.banners[i],cookieValue:1,expires:n,path:"/"}),this.get("container").remove(),this.destroy()}})},"@VERSION@",{requires:["flickr-view","hermes-template-basic-banner"],langBundles:["featured-banner"]});YUI.add("hermes-lang-featured-banner",function(e,a){e.Intl.add("hermes/featured-banner","en-US",{CHANGES_ARE_COMING:["Changes are coming to the way you log into Flickr!"],UPDATE_YOUR_EMAIL:["Update your email address to get started"],UPDATE_YOUR_LOGIN:["Update your login now"],WE_HAD_TROUBLE_PAYMENT:["We had trouble processing your credit card."],PLEASE_UPDATE_PAYMENT_PAST_DUE:["Please update your payment method to avoid losing Pro."],EXPLORE_IMPROVED:['Explore has been improved. <a href="',"${learnUrl}",'" target="_blank" class="learn-link">Learn more about the changes</a> and <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">share your feedback</a>.'],COVID_19_HEADER_BANNER:['Staying inspired during the COVID-19 pandemic: <a href="',"${groups}",'" target="_blank" class="groups-link">Groups for inspiration</a> and <a href="',"${financial}",'" target="_blank" class="financial-assistance-link"> financial assistance options for photographers</a>.'],FEED_HEADER_BANNER:['Welcome to your new activity feed! Visit the blog to <a href="',"${learnUrl}",'" target="_blank" class="learn-link">learn what\'s new</a> then <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">share your feedback</a>.'],NOTIFICATION_CENTER_HEADER_BANNER:['Welcome to your new Notification Center! <a href="',"${learnUrl}",'" target="_blank" class="learn-link">Learn more</a> and <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">let us know what you think</a>.'],NOTIFICATION_UPDATED_BANNER:['Notifications have been updated! <a href="',"${learnUrl}",'" target="_blank" class="learn-link">Learn more</a> and <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">let us know what you think</a>.'],NOTIFICATION_SETTINGS_HEADER_BANNER:['Welcome to your new Notification settings! <a href="',"${learnUrl}",'" target="_blank" class="learn-link">Learn more</a> and <a href="',"${feedbackUrl}",'" target="_blank" class="feedback-link">let us know what you think</a>.'],WE_ENCOUNTERED_ISSUE_RETRY:['We encountered an issue processing your payment but will continue to retry. <a href="',"${updateUrl}",'">Meanwhile, please check that your payment method is valid.</a>']})},"@VERSION@",{requires:["intl"]});YUI.add("tour-tooltip-helper",function(e,t){require("hermes-core/flog")(t);e.TourTooltipHelper=function(t,o){var r,l,a,s=o.tourTooltips||{},n=Object.keys(s)[0],i=1,c=Object.keys(s).length||3,p=new e.TemplateLibraryHelper(t),u=o.container||e.config.window,d=o.showPulse||!0,f=e.mix({langBundles:["common","feed"],appContext:t},e.Localizable),m={createToolTip:function(){var m=p.getTemplate("tour-tooltip",o.viewParams),T=u.one(s[n].target);if(T){l=s[n].nextTooltipId,r=l?f.intlMessage({intlName:"feed.SHOW_NEXT_TIP"}):f.intlMessage({intlName:"common.DONE"});var w=T.one(".new-feature-pulse");if(a=new e.Views.FluidDroparound({appContext:t,htmlMessage:m({message:s[n].message,tooltipCtaText:r,progress:i,total:c}),showDropArrow:!0,dismissOnOverlayClick:!0,observePageResize:!0,anchorElement:T,minVerticalSpace:400,width:275,preferLeft:!1,closeOnScroll:!0,anchorOffsetHorizontal:8,anchorOffsetVertical:0,classList:"over-modal",overlayClassList:"over-modal"}),d){if(!w){var h={featurePulseID:".pulse-"+i,featurePulseOn:!1,waveOneColor:"#128fdc",waveTwoColor:"#128fdc",waveThreeColor:"#128fdc"},g=p.getTemplate("new-feature-pulse",h);w=e.Node.create(g()),T.prepend(w)}a.on("closeDroparound",function(e){w.setAttribute("data-pulse-on",!1)}),w.setAttribute("data-pulse-on",!0)}a.show();var v=a.get("container");a.registerEventHandler(v.delegate("click",this.showNextTooltip.bind(this),".cta"))}else this.showNextTooltip()},showNextTooltip:function(){l?(a.close(),i+=1,n=s[n].nextTooltipId,this.createToolTip()):(a.close(),n=Object.keys(s)[0],i=1)},startTooltips:function(){i=1,n=Object.keys(s)[0],this.createToolTip()}};return e.augment(m,e.EventTarget),m}},"@VERSION@",{requires:["dropdown","fluid-droparound-view","event-custom","template-lib-helper"],langBundles:["common","feed"]});YUI.add("hermes-lang-feed",function(e,o){e.Intl.add("hermes/feed","en-US",{TITLE_PHOTO_BY:["${title}"," by ","${username}"],X_PHOTOS:[{type:"plural",valueName:"count",options:{one:"${#} photo",other:"${#} photos"}}],X_MANY_MORE:["+ ","${count}"," more"],READ_MORE:["Read more"],RECOMMENDED:["Recommended"],HIDE_THIS_RECOMMENDATION:["Hide this recommendation"],HIDE_THIS_POST:["Hide this post"],HIDE_ALL_POST_LIKE_THIS:["Hide all posts like this one"],HIDE_ALL_POST_FROM:["Hide all posts from ","${username}"],TURN_OFF_NOTIFICATION_POST:["Turn off notifications for this post"],FEATURED:["Featured"],LOAD_MORE:["Load more"],VISIT_GROUP:["View group"],FEED_SLOW:["We're having some trouble displaying your feed at the moment. Please try again."],FEED_NOTHING_TO_SHOW:["There are no activity to display right now."],VIEW_ALL:["View All"],FAVES_COUNT:[{type:"plural",valueName:"favesCount",options:{one:"${#} Fave",other:"${#} Faves"}}],FAVES_COUNT_FORMATTED:[{type:"plural",valueName:"favesCount",options:{one:["${countString}"," Fave"],other:["${countString}"," Faves"]}}],FAVES_99:["99+ Faves"],COMMENTS_COUNT:[{type:"plural",valueName:"commentsCount",options:{one:"${#} Comment",other:"${#} Comments"}}],COMMENTS_COUNT_FORMATTED:[{type:"plural",valueName:"commentsCount",options:{one:["${countString}"," Comment"],other:["${countString}"," Comments"]}}],COMMENTS_99:["99+ Comments"],VIEWS_COUNT:[{type:"plural",valueName:"viewsCount",options:{one:"${#} view",other:"${#} views"}}],VIEWS_COUNT_CAPITAL:[{type:"plural",valueName:"viewsCount",options:{one:"${#} View",other:"${#} Views"}}],VIEWS_COUNT_CAPITAL_FORMATTED:[{type:"plural",valueName:"viewsCount",options:{one:["${countString}"," View"],other:["${countString}"," Views"]}}],TITLE_QUOTES:["“","${title}","”"],GROUPS_ACTIVITY_LABEL:["Group Activity"],CARD_COUNT_PHOTOS_ONLY:["Posted ",{type:"plural",valueName:"photosCount",options:{one:"${#} photo",other:"${#} photos"}}],CARD_COUNT_VIDEOS_ONLY:["Posted ",{type:"plural",valueName:"videosCount",options:{one:"${#} video",other:"${#} videos"}}],CARD_COUNT_PHOTOS_VIDEOS:["Posted ",{type:"plural",valueName:"photosCount",options:{one:"${#} photo",other:"${#} photos"}}," ",{type:"plural",valueName:"videosCount",options:{one:"and ${#} video",other:"and ${#} videos"}}],LEARN_MORE:["Learn more"],SPONSORED:["Sponsored"],PRO_UPSELL_TITLE:["Jump for joy :)"],PRO_UPSELL_BENEFITS:["Ad-free Browsing, Advanced Stats & Savings on Shipping"],PRO_UPSELL_BENEFITS2:["Ad-free Browsing, Advanced Stats & 20% off Adobe Creative Cloud Photography plan"],PRO_UPSELL_BENEFITS_2:["Ad-free Browsing, Advanced Stats, and more"],CARD_EXPLANATION_WHY:["Why am I seeing this?"],CARD_EXPLANATION_REC:["This is a recommendation based on your faves and people you follow."],CARD_EXPLANATION_FEATURED:["This is a hand picked recommendation from our editors."],CARD_EXPLANATION_GROUP:["We'll give you recent activity round ups of your favorite groups in your feed."],FEED_GROUP_ONBOARDING_TITLE:["NEW — Group Activity"],FEED_GROUP_ONBOARDING_DESCRIPTION:['This is the recent activity of a group you’re in. You\'ll see more of your fave groups. To adjust what you see, <a href="/groups">go to your Groups</a>. Tap the star to see recent activity from that group.'],FEED_ONBOARDING_FEEDBACK_TITLE:["Do you like your new Flickr feed?"],FEED_ONBOARDING_FEEDBACK_DESCRIPTION:["We spent our time making improvements to your viewing experience. We also optimized our algorithms to show you more of what you love."],FEED_ONBOARDING_FEEDBACK_LIKE:["I like it"],FEED_ONBOARDING_FEEDBACK_NEEDS_IMPROVEMENT:["It needs improvements"],ACCESSIBLE_CARD_SUMMARY:[{type:"plural",valueName:"count",options:{one:["${ownername}"," posted ","${count}"," photo."],other:["${ownername}"," posted ","${count}"," photos."]}}],NAV_GROUPS_ONLY:["Groups"],NAV_PEOPLE_ONLY:["People"],NAV_ALL_ACTIVITY:["All Activity"],NOTHING_TO_SHOW:["No more activity at the moment."],REFRESH_TO_SEE_NEW_ACTIVITY:["Refresh to see new activity."],REFRESH_WHEN_YOURE_DONE:["Refresh when you're done"],JOIN_GROUPS_FEED_ACTIVITY:["Join some groups to see their recent activity"],NOTHING_TO_SHOW_NOONE_WITH_PHOTOS:["It doesn’t look like you follow anyone with photos."],NOTHING_TO_SHOW_FRIENDS_EXPLORE:['<a href="/import/people/" data-track="feedFindFriends">Find your friends from Facebook, Yahoo Mail and Gmail</a>.'],CHECK_OUT_OUR_PHOTOGRAPHERS:["Discover photos from our Featured Photographers"],RECOVERY_ADD_EMAIL_TITLE:["Add a recovery email to your account"],RECOVERY_IF_FORGET_PASSWORD:["If you forget your password or cannot access your account, we will use this information to help you get back in."],LOGIN_EMAIL:["Login email:"],RECOVERY_EMAIL:["Recovery email:"],RECOVERY_ENTER_EMAIL:["Enter email address"],ADD_RECOVERY_EMAIL:["Add recovery email"],RECOVERY_NAH:["Nah, I don't care about security"],RECOVERY_NOT_NOW:["Not right now"],RECOVERY_CONFIRM_TITLE:["Confirm your recovery email address"],RECOVERY_CHECK_EMAIL_VERIFY:["Check your email at <span>","${email}","</span>."],RECOVERY_YOU_MAY_RECEIVE_EMAILS:["You will receive emails from both Flickr and Yahoo. Click the link in each email to complete the confirmation."],RECOVERY_GOT_IT:["Got it"],RECOVERY_INVALID_EMAIL:["This email address is invalid."],RECOVERY_EMAIL_IN_USE:["This email address is already in use."],RECOVERY_EMAIL_ALREADY_YOURS:["You are already using this email address."],RECOVERY_EMAIL_SOMETHING_WENT_WRONG:["Something went wrong. Try again later."],VIEW_POST:["View post"],PHOTO_BY:["Photo by ","${username}"],VIDEO_BY:["Video by ","${username}"],FLICKR_EDITORIAL:["Flickr Editorial"],FLICKR_HELP:["Flickr Help"],OFFICIAL:["Official"],FEED_FALLBACK:['In the meantime, here are some photos from <a href="/explore">Explore</a> to admire:'],VIEW_IN_PHOTOSTREAM:["View in photostream"],VIEW_GROUP_POOL:["View group pool"],YOUR_ALL_TIME_VIEWS:["Your all-time views"],TODAYS_VIEWS:["Today’s views"],GET_STATS_WITH_PRO:["Get daily stats with Flickr Pro"],EXPLORE_POPULAR_PHOTOS:["Explore popular photos"],GROUPS_FOR_YOU:["Groups for you"],FLICKR_BLOG:["Flickr Blog"],CLICK_TO_LEARN_MORE:["Click to learn more."],TIP_FILTER:["Choose how you want to filter your feed: All activity, People, Friends & Family, or Groups."],TIP_CONTEXT_MENU:["You can mute groups or unfollow people, as well as share a photostream or send a message."],TIP_LAYOUT:["Choose your feed layout. Layouts with bigger images also show more information about the photo."],SHOW_NEXT_TIP:["Show next tip"],THIS_PAGE_RETIRED_SOON:['This page will be retired soon. Please <a class="feed-link" href="',"${feedUrl}",'">check out the new experience.</a>'],PEOPLE_I_FOLLOW:["People I follow"],FRIENDS_AND_FAMILY:["Friends and family"],PEOPLE_TO_FOLLOW:["People to follow"],GROUP_DISCUSSIONS:["Group discussions"],FILTER_ALL_ACTIVITY:["All activity"],FILTER_FRIENDS_AMP_FAMILY:["Friends & family"],SHOW_NEWER_ITEMS:["Show newer items"],ALL_TIME_VIEWS:["All-time views"],PEOPLE_YOU_FOLLOW:["People you follow"],EMPTY_FRIENDS_AND_FAMILY_1:["There are no posts from family & friends right now."],EMPTY_FRIENDS_AND_FAMILY_2:['You can mark anyone you follow as Friend or Family by hovering over the Following button, or on the <a class="people-link" href="',"${peopleUrl}",'">People you follow page</a>.'],EMPTY_PEOPLE_1:["There are no posts from the people you follow right now."],CHECK_OUT_RECS_BELOW:["Check out the recommended photographers below and start following people to see their content here."],EMPTY_GROUPS_1:["There are no posts from your groups right now."],EMPTY_GROUPS_2:['Go to your <a class="groups-link" href="',"${groupsUrl}",'">Groups page</a> to see recommended groups, or use the Search bar to find groups based on your interests.'],NO_ACTIVITY_RIGHT_NOW:["There is no activity to show right now."]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-tour-tooltip",function(t,e){var l=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,l,a,n){var o,s=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,i=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="tour-tooltip">\n\t<p class="message">'+i("function"==typeof(o=null!=(o=c(l,"message")||(null!=e?c(e,"message"):e))?o:r)?o.call(s,{name:"message",hash:{},data:n,loc:{start:{line:2,column:20},end:{line:2,column:31}}}):o)+'</p>\n\t<div class="actions">\n\t\t<span class="cta">'+i("function"==typeof(o=null!=(o=c(l,"tooltipCtaText")||(null!=e?c(e,"tooltipCtaText"):e))?o:r)?o.call(s,{name:"tooltipCtaText",hash:{},data:n,loc:{start:{line:4,column:20},end:{line:4,column:38}}}):o)+'</span>\n\t\t<span class="progress">'+i("function"==typeof(o=null!=(o=c(l,"progress")||(null!=e?c(e,"progress"):e))?o:r)?o.call(s,{name:"progress",hash:{},data:n,loc:{start:{line:5,column:25},end:{line:5,column:37}}}):o)+"/"+i("function"==typeof(o=null!=(o=c(l,"total")||(null!=e?c(e,"total"):e))?o:r)?o.call(s,{name:"total",hash:{},data:n,loc:{start:{line:5,column:38},end:{line:5,column:47}}}):o)+"</span>\n\t</div>\n</div>"},useData:!0}),a={};t.Array.each([],function(e){var l=t.Template.get("hermes/"+e);l&&(a[e]=l)}),t.Template.register("hermes/tour-tooltip",function(e,n){return n=n||{},n.partials=n.partials?t.merge(a,n.partials):a,l(e,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-new-feature-pulse",function(e,n){var l=e.Template.Handlebars.revive({1:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" animation-iteration-count: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"featurePulseIterationCount")||(null!=n?r(n,"featurePulseIterationCount"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"featurePulseIterationCount",hash:{},data:a,loc:{start:{line:14,column:98},end:{line:14,column:128}}}):t)+"; "},3:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveOneColor")||(null!=n?r(n,"waveOneColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveOneColor",hash:{},data:a,loc:{start:{line:15,column:75},end:{line:15,column:91}}}):t)+"; "},5:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveTwoColor")||(null!=n?r(n,"waveTwoColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveTwoColor",hash:{},data:a,loc:{start:{line:17,column:75},end:{line:17,column:91}}}):t)+"; "},7:function(e,n,l,o,a){var t,r=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return" background-color: "+e.escapeExpression("function"==typeof(t=null!=(t=r(l,"waveThreeColor")||(null!=n?r(n,"waveThreeColor"):n))?t:e.hooks.helperMissing)?t.call(null!=n?n:e.nullContext||{},{name:"waveThreeColor",hash:{},data:a,loc:{start:{line:19,column:77},end:{line:19,column:95}}}):t)+"; "},compiler:[8,">= 4.3.0"],main:function(e,n,l,o,a){var t,r,u=null!=n?n:e.nullContext||{},i=e.hooks.helperMissing,s=e.escapeExpression,c=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'\n\n<div class="new-feature-pulse '+s("function"==typeof(r=null!=(r=c(l,"featurePulseID")||(null!=n?c(n,"featurePulseID"):n))?r:i)?r.call(u,{name:"featurePulseID",hash:{},data:a,loc:{start:{line:13,column:30},end:{line:13,column:48}}}):r)+'" data-pulse-on="'+s("function"==typeof(r=null!=(r=c(l,"featurePulseOn")||(null!=n?c(n,"featurePulseOn"):n))?r:i)?r.call(u,{name:"featurePulseOn",hash:{},data:a,loc:{start:{line:13,column:65},end:{line:13,column:83}}}):r)+"\" >\n    <div class='wave'        style=\""+(null!=(t=c(l,"if").call(u,null!=n?c(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:36},end:{line:14,column:137}}}))?t:"")+"\n                                    "+(null!=(t=c(l,"if").call(u,null!=n?c(n,"waveOneColor"):n,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:15,column:36},end:{line:15,column:100}}}))?t:"")+"\"></div>\n    <div class='wave delay1' style=\""+(null!=(t=c(l,"if").call(u,null!=n?c(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:16,column:36},end:{line:16,column:137}}}))?t:"")+"\n                                    "+(null!=(t=c(l,"if").call(u,null!=n?c(n,"waveTwoColor"):n,{name:"if",hash:{},fn:e.program(5,a,0),inverse:e.noop,data:a,loc:{start:{line:17,column:36},end:{line:17,column:100}}}))?t:"")+"\"></div>\n    <div class='wave delay2' style=\""+(null!=(t=c(l,"if").call(u,null!=n?c(n,"featurePulseIterationCount"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:18,column:36},end:{line:18,column:137}}}))?t:"")+"\n                                    "+(null!=(t=c(l,"if").call(u,null!=n?c(n,"waveThreeColor"):n,{name:"if",hash:{},fn:e.program(7,a,0),inverse:e.noop,data:a,loc:{start:{line:19,column:36},end:{line:19,column:104}}}))?t:"")+'"></div>\n</div>'},useData:!0}),o={};e.Array.each([],function(n){var l=e.Template.get("hermes/"+n);l&&(o[n]=l)}),e.Template.register("hermes/new-feature-pulse",function(n,a){return a=a||{},a.partials=a.partials?e.merge(o,a.partials):o,l(n,a)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("notifications-panel-view",function(t,i){var e=require("hermes-core/flog")(i);t.namespace("Views")[this.name]=t.Base.create("notifications-panel-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(i){this.params=i,this.notificationsHelper=new t.NotificationsHelper(this.appContext),this.selectedTabId="main",this.unreadCounts={main:void 0,admin:void 0},this.tourTooltips={tooltipA:{message:this.intlMessage({intlName:"notifications.TIP_SETTINGS"}),target:".notifications-panel .actions .settings-link",nextTooltipId:"tooltipB"},tooltipB:{message:this.intlMessage({intlName:"notifications.TIP_MUTE"}),target:".notifications-panel .notification-item .notification-context-menu-button",nextTooltipId:"tooltipC"},tooltipC:{message:this.intlMessage({intlName:"notifications.TIP_GROUPS"}),target:'.notifications-panel .nav-container .tabs [data-tab-id="admin"]'}}},subviewConfig:{"notifications-list-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerType:"panel"},"notification-banner-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,bannerType:"notif_drop"}},loadState:function(){var i=this,e=[];return e.push(this.appContext.getModel("person-notifications-models",this.appContext.getViewer().nsid).then(function(t){var e=t.getValue("unseenNotificationCounts");i.notificationsModel=t,i.unreadCounts={main:e.default||0,admin:e.groupsYouAdmin||0},i.unreadCounts.main=i.unreadCounts.main>=100?"99+":i.unreadCounts.main,i.unreadCounts.admin=i.unreadCounts.admin>=100?"99+":i.unreadCounts.admin})),e.push(this.appContext.getModel("person-groups-models",this.appContext.getViewer().nsid).then(function(t){i.personGroupsModel=t})),t.Promise.all(e)},buildContainer:function(){var i=!parseInt(this.appContext.getCookie(t.config.flickr.banners.dismiss_notification_updated_banner_name))&&this.appContext.flipper.isFlipped("enable-notification-banners");parseInt(this.appContext.getCookie(t.config.flickr.banners.dismiss_notification_updated_banner_name))&&this.appContext.reissueCookie(t.config.flickr.banners.dismiss_notification_updated_banner_name,"/"),this.setContainerWithTemplate("notifications-panel",{width:this.params.width,height:this.params.height,unreadCounts:this.unreadCounts,showBanner:i,showAdminTab:this.personGroupsModel.getValue("adminCount")>0})},activate:function(){var i=this,e=this.get("container");return this.tabNodes={},this.listView=this.subviews["notifications-list-view"],this.listView.setAnalyticsLocation("panel"),this.tabContainer=e.one(".tabs"),this.tabNodes.main=this.tabContainer.one('.tab[data-tab-id="main"]'),this.tabNodes.admin=this.tabContainer.one('.tab[data-tab-id="admin"]'),this.scrollContainer=e.one(".list-container"),this.scrollContainer&&(this.scrollContainerHeight=this.scrollContainer.get("clientHeight"),this.registerEventHandler(this.scrollContainer.on("scroll",t.betterThrottle(this.handleScroll.bind(this),100,this,!1)))),this.registerEventHandler(this.tabContainer.delegate("click",this.handleTabClick.bind(this),".tab")),this.registerEventHandler(e.on("click",this.handleAnalyticsClicks.bind(this))),this.listView.setAdditionalApiParams(this.notificationsHelper.getFilterConfig("all").additionalApiParams),this.listView.isActivated?this.loadInitial():this.listView.on("activated",function(){i.loadInitial()}),this.registerEventHandler(this.appContext.flapp.before("navigate",function(t){var i=t.details[0].url,e=this.notificationsModel.getValue("unseenNotificationCounts");i&&(i.match(/^.+(\/notifications)$/)?this.notificationsModel.setValue("unseenNotificationCounts",Object.assign(e,{total:0})):this.notificationsModel.setValue("unseenNotificationCounts",{}))}.bind(this))),this.registerEventHandler(e.delegate("click",function(t){if(!(t.metaKey||t.ctrlKey||t.which&&2===t.which)){t.target;var i=t.target.ancestor("a",!0).getAttribute("href");i&&(t.stopPropagation(),t.preventDefault(),window.location.href=i)}}.bind(this),".notification-photo-thumb, .notification-item .headline-container a")),this.tourTooltipStart=e.one(".tour-tooltip-start"),this.tourTooltipStart&&this.registerEventHandler(this.tourTooltipStart.on("click",this.handleTourTooltipClick.bind(this))),this},loadInitial:function(){var t=this;return this.listView.loadInitial().then(function(i){return t.tabContainer.removeClass("disabled"),t.listView.appendItems(i)}).then(function(){t.loadTooltipHelper()})},handleTabClick:function(t){var i=t.target.ancestor(".tab",!0).getAttribute("data-tab-id");this.switchTabs(i)},switchTabs:function(t){t&&this.tabNodes[t]&&t!==this.selectedTabId&&(this.selectedTabId=t,Object.values(this.tabNodes).forEach(function(t){t.removeClass("selected")}),this.tabNodes[t].addClass("selected"),this.loadTab(t))},loadTab:function(t){var i=this;return this.tabContainer.addClass("disabled"),"main"===t?this.listView.setAdditionalApiParams(this.notificationsHelper.getFilterConfig("all").additionalApiParams):"admin"===t&&this.listView.setAdditionalApiParams(this.notificationsHelper.getFilterConfig("groupsYouAdmin-all").additionalApiParams),this.listView.reload().then(function(){i.tabContainer.removeClass("disabled"),i.loadTooltipHelper()}).catch(function(t){e.error("error reloading notification listing",t)})},handleScroll:function(t){var i=this,e=this.scrollContainer.get("scrollTop"),n=this.scrollContainer.get("scrollHeight");!this.listView.isLoadingMore&&e+this.scrollContainerHeight+100>n&&!this.listView.isAtEnd&&(i.tabContainer.addClass("disabled"),this.listView.loadContinuated().then(function(t){return i.tabContainer.removeClass("disabled"),i.listView.appendItems(t)}))},handleTourTooltipClick:function(){this.tourTooltipHelper.startTooltips()},loadTooltipHelper:function(){var i=this.get("container"),e=Object.assign({},this.tourTooltips);i.one('.tabs .tab[data-tab-id="admin"]')||(e.tooltipB.nextTooltipId=void 0,delete e.tooltipC),i.one(".notifications-empty-state").hasClass("hidden")||(e.tooltipA.nextTooltipId=e.tooltipC?"tooltipC":void 0,delete e.tooltipB),this.tourTooltipHelper=new t.TourTooltipHelper(this.appContext,{tourTooltips:e,viewParams:this.params,container:i,showPulse:!0})},handleAnalyticsClicks:function(t){var i=t.target;i.ancestor('.tab[data-tab-id="main"]',!0)?this.beaconAnalytics("Tab Click: main"):i.ancestor('.tab[data-tab-id="admin"]',!0)?this.beaconAnalytics("Tab Click: admin"):i.ancestor(".foot-link",!0)?this.beaconAnalytics("View All Click"):i.ancestor(".settings-link",!0)&&this.beaconAnalytics("Settings Click")},beaconAnalytics:function(i){t.Analytics.setDataLayerProp("notifications.actionType",i),t.Analytics.setDataLayerProp("notifications.location","panel"),t.Analytics.sendClick("","Notifications Feature Action"),t.Analytics.setDataLayerProp("notifications.actionType",""),t.Analytics.setDataLayerProp("notifications.location","")}})},"@VERSION@",{requires:["flickr-view","hermes-template-notifications-panel","notifications-helper","notification-banner-view","tour-tooltip-helper","hermes-template-tour-tooltip","hermes-template-new-feature-pulse"],langBundles:["common","notifications","relative-dates"]});